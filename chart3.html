<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Drug types by jurisdiction - Visualisation Q4</title>
    <link rel="stylesheet" href="css/style.css" />
    <script src="https://d3js.org/d3.v7.min.js"></script>
  </head>
  <body>
    <header class="topbar">
      <a href="index.html" class="home-btn" aria-label="Go to homepage">
        <img src="image/home.svg" alt="Home" class="home-icon" />
      </a>
      <div class="brand-block">
        <h1 class="brand-title">Drug types by jurisdiction</h1>
        <p class="brand-sub">Most frequently detected drug per state</p>
      </div>
      <div class="top-right">
        <a href="menu.html" class="btn-secondary">Menu</a>
      </div>
    </header>

    <main class="dashboard fullscreen">
      <section class="card">
        <h1 style="margin:20px; text-align: center; font-size:18px;">Dominant Drug-Positive Roadside Tests by Jurisdiction (2023-2024)</h1>
        <details class="info-panel" data-mobile-collapsible open style="--info-accent:#4e79a7;">
          <summary>
            <span class="info-chip">Guide</span>
            <span>How to interpret this visualisation</span>
            <span class="info-toggle-hint">Tap to toggle</span>
          </summary>
          <div class="info-body">
            <p>Explore the interactive map to understand which drug types are most frequently detected across Australian jurisdictions. Each state is coloured by its dominant positive roadside drug detection based on aggregated test data. Hover over a state to view detailed positivity percentages for each drug type.</p>
            <p><strong>Click on any state</strong> to reveal a breakdown panel showing the exact proportion of Amphetamine, Cannabis, Ecstasy, and Methylamphetamine detections within that jurisdiction. Unselected states dim automatically to help focus on the selected region.</p>
            <p>The <strong>gradient fill</strong> displayed after clicking a state illustrates the relative contribution of each drug type. This enables easy comparison of drug prevalence patterns across the country, giving a comprehensive view of drug-related roadside testing outcomes.</p>
          </div>
        </details>
        <div id="chart3" class="responsive-svg-container"></div>
      </section>
    </main>

    <script src="js/chart3.js"></script>
    <script src="js/LoadData.js"></script>
    <button id="prevFloat" aria-label="Previous chart" style="position:fixed;left:8px;top:50%;transform:translateY(-50%);z-index:60;" class="float-nav-btn">
      <svg aria-hidden="true" width="28" height="28" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M8 4l8 8-8 8" stroke="currentColor" stroke-width="2.4" stroke-linecap="round" stroke-linejoin="round"/>
      </svg>
    </button>
    <button id="nextFloat" aria-label="Next chart" style="position:fixed;right:8px;top:50%;transform:translateY(-50%);z-index:60;" class="float-nav-btn">
      <svg aria-hidden="true" width="28" height="28" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M8 4l8 8-8 8" stroke="currentColor" stroke-width="2.4" stroke-linecap="round" stroke-linejoin="round"/>
      </svg>
    </button>
    <script>
      (function(){
        const prev = 'chart2.html';
        const next = 'chart4.html';
        const p = document.getElementById('prevFloat');
        const n = document.getElementById('nextFloat');
        if(p) p.addEventListener('click', ()=> location.href = prev);
        if(n) n.addEventListener('click', ()=> location.href = next);
        document.addEventListener('keydown', (e)=>{
          if(e.key === 'ArrowLeft') location.href = prev;
          if(e.key === 'ArrowRight') location.href = next;
        });
      })();
      (function(){
        if (window.matchMedia('(max-width: 780px)').matches) {
          document.querySelectorAll('[data-mobile-collapsible]').forEach(el => el.removeAttribute('open'));
        }
      })();
    </script>
  </body>
</html>
